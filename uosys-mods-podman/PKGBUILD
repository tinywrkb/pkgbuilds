# Maintainer: tinywrkb <tinywrkb@gmail.com>

# TODO: might need to handle /etc/cni/net.d/87-podman-bridge.conflist, net.d is also owned by cni-plugins

_pkgname=podman
pkgname=uosys-mods-${_pkgname}
pkgver=2021.06.14.1
pkgrel=1
pkgdesc="$_pkgname uosys mods"
arch=('any')
license=('GPL')
url=''
depends=('uosys-mods')

build() {
  cat << EOF > mods
#target_list=()

#mv_list=()

rmdir_list=(containers/compose)

link_list=(containers/compose)
EOF

  cat << EOF > tmpfiles.d.conf
# $_pkgname
d /var/etc/containers - - - - -

# containers-common
# TODO: maybe by default bind-mount from or symlink to /containers or /data/containers or /data/var/lib/containers
d /var/lib/containers - - - - -

# podman-compose
d /var/etc/containers/compose - - - - -
EOF
}

package() {
  depends+=($_pkgname)
  source /usr/lib/os/os-mods-install
}
