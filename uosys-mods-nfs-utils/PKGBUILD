# Maintainer: tinywrkb <tinywrkb@gmail.com>

_pkgname=nfs-utils
pkgname=uosys-mods-${_pkgname}
pkgver=2021.02.24.1
pkgrel=1
pkgdesc="$_pkgname uosys mods"
arch=('any')
license=('GPL')
url=''
depends=('uosys-mods')

build() {
  cat << EOF > mods
#target_list=()

#mv_list=()

rmdir_list=(exports.d)

link_list=(exports.d)
EOF

  cat << EOF > tmpfiles.d.conf
# $_pkgname
d /var/etc/exports.d - - - - -
# TODO: check what is auto-generated by the daemon and can be dropped
d /var/lib/nfs - - - - -
f /var/lib/nfs/etab - - - - -
f /var/lib/nfs/rmtab - - - - -
d /var/lib/nfs/rpc_pipefs 555 - - - -
d /var/lib/nfs/sm.bak 700 - - - -
d /var/lib/nfs/sm 700 - - - -
f /var/lib/nfs/state - - - - -
d /var/lib/nfs/v4recovery - - - - -
EOF
}

package() {
  depends+=($_pkgname)
  source /usr/lib/os/os-mods-install
}
