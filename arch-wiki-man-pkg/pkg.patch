From 0fad8cec9fed8d49eb98408b3cedbcb0ced5b1d0 Mon Sep 17 00:00:00 2001
From: tinywrkb <tinywrkb@gmail.com>
Date: Fri, 12 Jul 2019 15:51:24 +0300
Subject: [PATCH] pkg: stashing

---
 bin/find.js   | 8 ++++++--
 bin/update.js | 4 ++--
 lib/util.js   | 2 +-
 package.json  | 1 -
 4 files changed, 9 insertions(+), 6 deletions(-)

diff --git a/bin/find.js b/bin/find.js
index ce9ab86..8216f4f 100755
--- a/bin/find.js
+++ b/bin/find.js
@@ -11,8 +11,12 @@ var tmpSave = require('../lib/fileio').tmpSave;
 var removeTmp  = require('../lib/fileio').removeTmp;
 var chalk = require('chalk');
 
-var lastUpdate = require('arch-wiki-md-repo').updated;
-var db = require('arch-wiki-md-repo').db;
+//var lastUpdate = require('arch-wiki-md-repo').updated;
+//var db = require('arch-wiki-md-repo').db;
+
+var archwikimddb = '/usr/lib/node_modules/arch-wiki-md-repo/wiki/db.json';
+var lastUpdate = require(archwikimddb).updated;
+var db = require(archwikimddb).db;
 
 var spawn = require('child_process').spawn;
 
diff --git a/bin/update.js b/bin/update.js
index 294ded5..d6ba7a7 100755
--- a/bin/update.js
+++ b/bin/update.js
@@ -7,7 +7,7 @@ var path = require('path');
 
 var options = {
     name: 'arch-wiki-md-repo',
-    path: path.resolve(__dirname + '/..'),
+    path: path.resolve(path.dirname(process.execPath) + '/../lib/node_modules/arch-wiki-man'),
     forceInstall: true
 };
 
@@ -23,4 +23,4 @@ npmi(options, function(err, result) {
     }
 
     console.log(options.name + ' has been successfully updated or reinstalled.');
-});
\ No newline at end of file
+});
diff --git a/lib/util.js b/lib/util.js
index 63cfb33..6677557 100644
--- a/lib/util.js
+++ b/lib/util.js
@@ -1,7 +1,7 @@
 'use strict';
 
 var path = require('path');
-var archWiki = require.resolve('arch-wiki-md-repo');
+var archWiki = require.resolve('/usr/lib/node_modules/arch-wiki-md-repo');
 
 exports.getArticlePath = getArticlePath;
 exports.findItem = findItem;
diff --git a/package.json b/package.json
index 0e935e5..bac3531 100644
--- a/package.json
+++ b/package.json
@@ -23,7 +23,6 @@
   "author": "Gregory J. Scheerlinck",
   "license": "GPL-3.0",
   "dependencies": {
-    "arch-wiki-md-repo": "*",
     "bluebird": "^3.1.5",
     "chalk": "^1.1.1",
     "inquirer": "^0.12.0",
-- 
2.22.0

